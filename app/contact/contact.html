<h1>Contact</h1>
<div class="error center" ng-if="error.show"><span ng-bind-html="error.text"></span>
    <a class="close" ng-click="error.show = !error.show"><i class="fa fa-times-circle"></i></a>
</div>
<a ng-if="u" ng-click="$location.search('u', null)" class="back"><i class="fa fa-chevron-circle-left fa-2x"></i></a>
<div class="center">
    <label for="name">Name:</label>
    <input id="name" type="text" placeholder="Name" ng-model="newName" ng-disabled="user.displayName"
        required/></br>
    <label for="email">Email:</label>
    <input id="email" type="email" placeholder="Email" ng-model="newEmail" ng-disabled="user.email"
        required/>
</div>
<div class="center">
    <label for="type">Type:
        <i class="fa fa-caret-down"></i>
        <select id="type" ng-model="newType" required>
            <optgroup labeL="Type">
                <option>Incorrect Level</option>
                <option>General</option>
			    <option ng-if="!user.isAnonymous">Trick Submission</option>
			</optgroup>
        </select>
    </label>
</div>
<br/>

<form ng-if="newType == 'General'" ng-submit="submitGen(emailupdates)" class="center">
    <label for="desc">Describe your issue:</label>
    <textarea id="desc" ng-model="issue" required></textarea>
    <div class="mt">
        <a ng-click="emailupdates = !emailupdates" class="emt black"><i ng-class="(emailupdates ? 'checked' : '')" class="checkbox"></i> Recieve
            email updates about this issue</a>
    </div>
    <input type="submit" value="Submit" />
</form>

<form ng-if="newType == 'Incorrect Level'" ng-submit="submitLev(emailupdates)" class="center">
    <label for="id0" class="char">https://the-tricktionary.com/details/</label>
    <input type="number" id="id0" ng-model="newId0" class="char" placeholder="0" min="0"
        max="4" required/>
    <label for="id1" class="char inline">/</label>
    <input type="number" id="id1" ng-model="newId1" class="char" placeholder="0" min="0"
        required/>
    <br/>
    <label for="level" class="inline">Is Level</label>
    <input type="number" id="level" ng-model="newLvl" class="char" min="0" max="6" required/>
    <label for="org" class="inline">in</label>
    <label for="org" class="empty">
        <i class="fa fa-caret-down"></i>
        <select id="org" required>
            <option value="fisac-irsf rules">fisac-irsf rules</option>
            <option value="wjr rules">wjr rules</option>
        </select>
    </label>
    <div class="mt">
        <a ng-click="emailupdates = !emailupdates" class="emt black"><i ng-class="(emailupdates ? 'checked' : '')" class="checkbox"></i> Recieve
            email updates about this issue</a>
    </div>
    <input type="submit" value="Submit" />
</form>

<form ng-if="newType == 'Trick Submission'" ng-submit="submitTrick()" name="form"
    class="center">
    <div>
        <label for="newTrickName">Trick Name:</label>
        <input id="newTrickName" type="text" placeholder="Trick Name" ng-model="newTrickName"
            required/>
    </div>
    <div>
        <label for="newDesc">Description:</label>
        <input id="newDesc" type="text" placeholder="Description" ng-model="newDesc" required/>
    </div>
    <div>
        <label for="newVideo">Video:</label>
        <input id="newVideo" type="file" name="video" placeholder="Video" ng-model="newVideo"
            required/>
    </div>
    <div>
        <label>
		    Type:
            <i class="fa fa-caret-down"></i>
            <select id="newTrickType" ng-model="newTrickType" required>
                <optgroup label="Type">
                    <option>Basics</option>
                    <option>Multiples</option>
                    <option>Manipulation</option>
                    <option>Powers</option>
                    <option>Releases</option>
	    		</optgroup>
            </select>
        </label>
    </div>
    <ul class="list">
        <li>Videos can be of any jump rope trick, whether the trick is already in the
            Tricktionary or not.
            <li>Please record your videos in landscape</li>
            <li>Your videos can be no larger than 100Mb</li>
            <li>If you are able to record in slow motion please do!</li>
            <li>Please keep your recording as stable as possible, or set up your camera</li>
            <li>Try to find a plain background that contrasts the color of your rope</li>
    </ul>
    <input type="submit" value="Submit" />
    <div class="pc">
        <div id="pro-bar" class="pb">
            <div id="pro-lab" class="prl"></div>
        </div>
    </div>
    <p class="gray small center">
        By submitting a trick you agree to license it under
        <a href="https://creativecommons.org/licenses/by/4.0/" target="_blank">Creative Commons Attribution 4.0 International</a>
    </p>
    </form>

    <h1>Your Issues</h1>
    <div ng-if="person" ng-repeat="issue in person" class="article" ng-attr-id="{{ issue.$id }}">
        <h2 ng-class="(i == issue.$id ? 'black' : '')">{{ issue.type }}</h2>
        <h2>{{ issue.trickName }}</h2>
        <h3>{{ issue.trickType }}</h3>
        <div marked="issue.desc" opts="{sanitize: true, gfm: true}"></div>
        <p ng-if="issue.type == 'Incorrect Level'"><a ng-href="https://the-tricktionary.com/details/{{ issue.id0 }}/{{ issue.id1 }}">https://the-tricktionary.com/details/{{ issue.id0 }}/{{ issue.id1 }}</a>            should be level
            <b>{{ issue.level }}</b> in <b>{{ issue.org }}</b>
        </p>
        <a href="{{ issue.video }}" target="_blank">{{ issue.video }}</a>
        <div ng-if="issue.type != 'Trick Submission'">
            <h3 ng-if="issue.replies">Replies</h3>
            <h4 ng-repeat-start="reply in issue.replies">{{ reply.name }}</h4>
            <div marked="reply.reply" opts="{sanitize: true, gfm: true}" ng-repeat-end></div>
            <p ng-if="issue.resolved" class="gray">This issue has been closed and marked as resolved</p>
            <form ng-submit="newReply(issue, newReplyText)" class="center" ng-if="!issue.resolved && !user.isAnonymous">
                <textarea ng-model="newReplyText" placeholder="Your reply"></textarea>
                <input type="submit" value="Reply" />
            </form>
        </div>
        <div class="mt">
            <button ng-confirm-click="Do you really want to remove this issue?" confirmed-click="person.$remove(issue)"
              class="red inline"><i class="fa fa-trash-o"></i> Delete</button>
            <button ng-click="issue.email = user.email; person.$save(issue)" class="green inline"
              ng-hide="issue.email"><i class="fa fa-envelope-o"></i> Subscribe to updates</button>
            <button ng-click="issue.email = null; person.$save(issue)" class="green inline" ng-hide="!issue.email">
              <i class="fa fa-envelope-o"></i> Unsubscribe from updates</button>
        </div>
    </div>

language: node_js
node_js:
- 6
install:
- npm install
- cd functions && npm install && cd ..
script:
- npm test
- if [ "$TRAVIS_BRANCH" == "master" ]; then npm run deploy; fi
- npm run staging
after_success:
- npm run docs
- openssl aes-256-cbc -K $deploy_key_pass -iv $deploy_key_iv -in deploy.key.enc -out deploy.key -d && chmod go-rwx deploy.key || true
- chmod +x ./docs.sh
- ./docs.sh
branches:
  only:
  - master
  - develop
  - release-*
notifications:
  email: false
  slack:
    secure: "Ra2HOWWRs1wR9q96Ns1id2t0ITkA8Nm8h0n/NMWy3bDo00ht0VFyqd0l8KjN0I5ckO+IieqMcgCCmo6AlhAf8gUaF9zvthIk+Q+EheWEUhezP6sREizuF0sCMskIDF/zgOzYaWDZTjYYrmnK5U9GIFujPI8r0BmIhs6PLsObldhNZ5EuvPoM/ad1PIQhTaBHNWhW4LD2c5PojwwaEhmWC0Vbtw5pYsEIe3tSKtOVAyfhQ9qg57CqqwhjxLdTBbcbtj0as49/5OfSet/oBwY1XRx/2bBPISG5A3uxRcE05EPzScMcBCzJK/sBkHAhriCwrmCFLXOx1OMnatXE0QXpycGUxJbrCYEHRwZJ1AUXgXlg7zbRnjP8ukbkMfRUQEYU3Tud470nqVB62//aaWhfTmIAj6XMgHXAa9lr60OYFVfb5mM/N+jcV/5hTGD5bNEY7RYlsh6RCvv67paV9jf3D57FWFU5qRHzL8cuQVrK6OkBDMbG6l5Bj8QZ8PvwSzJV/w2Vx7m9dQjUfb8+h7HySYCRcIpFYfI6S8lludNKn2AMDt+ijMNQMCAG07raH3HyMlgAFGQikOY9BtTgdNBlmjjFR358A2IbDAruNoVqnKdReCHCzxtdZ3mCv42//CTATWwB6i3lHe4Obhs/zdPjTQt1OXEHxKdc38W884z4i+4="
